# デイサービス送迎計画アプリ - 最終サマリー

## プロジェクト概要

デイサービスの送迎運行計画を効率化するWebアプリケーションを開発しました。地図連携とルート最適化機能により、送迎業務の効率化を実現します。

## 完成した機能

### ✅ ステップ1: 基本設計とデータ準備
- Googleスプレッドシートのデータ構造設計
- GitHubリポジトリの作成と管理
- Reactベースの美しいWebアプリケーション
- 本日の送迎対象者一覧表示
- サマリー情報（送迎対象者数、車椅子対応数、利用可能車両数）

### ✅ ステップ2: 地図連携とルート計算機能
- OpenStreetMapによる地図表示
- 事業所と利用者の位置をマーカー表示（車椅子対応を色で区別）
- 最近傍法による送迎ルートの自動最適化
- デイサービスから出発してデイサービスに戻るルート
- 総移動距離と予想所要時間の自動計算
- 訪問順序の表示
- 最適化されたルートを地図上に青い線で表示
- 車椅子対応を考慮した自動車両割り当て

### ✅ 拡張機能: 30名対応と手動編集
- **利用者数**: 30名（荒川区及び近隣エリア）
- **車椅子対応**: 10名
- **車両数**: 5台
- **手動ルート編集**: ドラッグ&ドロップで訪問順序を入れ替え可能
- **自動再計算**: 順序変更時に距離と時間を自動で再計算
- **車両別表示**: 各車両の利用者割り当てを視覚的に表示

## 技術スタック

### フロントエンド
- **React**: UIフレームワーク
- **Vite**: ビルドツール
- **Tailwind CSS**: スタイリング
- **shadcn/ui**: UIコンポーネント
- **Lucide Icons**: アイコンライブラリ
- **Leaflet**: 地図表示ライブラリ
- **react-leaflet**: React用Leafletラッパー
- **@dnd-kit**: ドラッグ&ドロップライブラリ

### バックエンド・インフラ
- **GitHub**: ソースコード管理
- **Manus Deploy**: ホスティングサービス

### 地図サービス
- **OpenStreetMap**: 無料の地図タイル
- **Leaflet**: オープンソースの地図ライブラリ

## データ構造

### 利用者マスタ（30名）
- ID、氏名、住所、座標（緯度・経度）
- 車椅子対応の有無
- 備考（認知症、介助の必要性など）

### 車両マスタ（5台）
- 車両ID、車両名、担当者名
- 定員、車椅子対応可能数

### 事業所情報
- 名称、住所、座標

## ルート最適化アルゴリズム

### 最近傍法（Nearest Neighbor Algorithm）
1. デイサービスから出発
2. 現在地から最も近い未訪問の利用者を選択
3. すべての利用者を訪問するまで繰り返し
4. デイサービスに戻る

### 車両割り当てロジック
1. 車椅子対応が必要な利用者を優先的に車椅子対応可能な車両に割り当て
2. 各車両の定員と車椅子対応可能数を考慮
3. 複数車両に均等に分配

## 計算結果（30名の場合）

- **総移動距離**: 21.74 km
- **予想所要時間**: 156分（2時間36分）
- **訪問件数**: 30件
- **使用車両**: 5台

## 使い方

### 1. アプリにアクセス
公開URL: https://〇〇〇.manus.app（デプロイ後に発行）

### 2. 本日の送迎対象者を確認
- サマリー情報で全体像を把握
- 一覧で各利用者の詳細を確認

### 3. ルートを最適化
- 「ルートを最適化」ボタンをクリック
- 自動で最適なルートが計算される

### 4. 地図で確認
- 「地図で表示」ボタンをクリック
- 利用者の位置とルートを視覚的に確認

### 5. 手動で調整（オプション）
- 「手動で調整」ボタンをクリック
- ドラッグ&ドロップで訪問順序を入れ替え
- 距離と時間が自動で再計算される

### 6. 車両別の割り当てを確認
- 各車両に割り当てられた利用者を確認
- 定員と車椅子対応数をチェック

## 今後の拡張予定

### ステップ3: Googleスプレッドシート連携
- 外部データソースからリアルタイムでデータを読み込み
- Google Sheets APIの認証設定
- データの自動同期

### ステップ4: 高度なルート最適化
- 実際の道路網を考慮したルート計算
- 交通状況を考慮した所要時間予測
- 複数車両の同時最適化

### ステップ5: 通知機能
- LINEまたはメールで送迎開始・到着予定時刻を通知
- ドライバーへのルート情報送信
- 利用者家族への連絡

### ステップ6: モバイル対応
- スマートフォン・タブレットでの使いやすさ向上
- オフライン対応
- GPS連携

### ステップ7: データ分析
- 送迎実績の記録
- 効率性の分析
- レポート生成

## GitHubリポジトリ

https://github.com/SHUJIRO1234/dayservice-transport-app

## ドキュメント

- **README.md**: プロジェクト概要
- **USER_GUIDE.md**: ユーザー向け使い方ガイド
- **DEVELOPER_GUIDE.md**: 開発者向け技術ドキュメント
- **PROJECT_SUMMARY.md**: プロジェクトサマリー
- **FINAL_SUMMARY.md**: 最終サマリー（本ドキュメント）

## 開発履歴

### 初期開発（ステップ1-2）
- 基本設計とデータ準備
- 地図連携とルート計算機能
- 5名のサンプルデータ

### 拡張開発（30名対応）
- 30名のサンプルデータ生成
- 5台の車両に拡充
- 手動ルート編集機能の追加
- ドラッグ&ドロップUI実装
- 自動再計算機能

## 開発環境

### ローカル開発
```bash
cd dayservice-transport-app/transport-web
pnpm install
pnpm dev
```

### ビルド
```bash
pnpm build
```

### デプロイ
Manus Deployを使用して自動デプロイ

## ライセンス

MIT License

## 作成者

Manus AI Assistant

## 作成日

2025年10月14日

---

**次のステップに進む場合は、以下のように指示してください：**
- 「ステップ3（Googleスプレッドシート連携）を始めてください」
- 「地図機能をもっと改善してください」
- 「LINE通知機能を追加してください」
- 「モバイル対応を強化してください」

